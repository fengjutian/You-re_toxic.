<view class="container">
  <view class="intro">
    <view class="title">睡眠与生活习惯自测</view>
    <view class="desc">
      测评用于了解你的作息规律、睡眠质量和生活习惯，仅供参考。
    </view>
  </view>

  <block wx:for="{{questions}}" wx:key="index">
    <view class="card">
      <view class="question">{{index + 1}}. {{item.text}}</view>
      <radio-group data-index="{{index}}" bindchange="onSelect">
        <label wx:for="{{item.options}}" wx:key="value" class="option">
          <radio value="{{item.value}}" /> {{item.label}}
        </label>
      </radio-group>
    </view>
  </block>

  <button class="submit" bindtap="submit">查看结果</button>

  <view wx:if="{{result}}" class="result">
    <view class="result-title">你的生活与睡眠评分</view>

    <block wx:for="{{result}}" wx:key="key">
      <view class="dimension-card">
        <view class="dimension-header">
          <view class="dimension-name">{{item.name}}</view>
          <view class="dimension-level {{item.levelClass}}">{{item.level}}</view>
        </view>

        <view class="score-section">
          <view class="score-info">
            <text class="score-value">{{item.score}}</text>
            <text class="score-max">/ {{item.maxScore}}</text>
          </view>
          <view class="progress-bar">
            <view class="progress-fill" style="width: {{item.percentage}}%"></view>
          </view>
          <view class="score-percent">{{item.percentage}}%</view>
        </view>

        <view class="dimension-desc">{{item.desc}}</view>

        <view class="keywords-section">
          <block wx:for="{{item.keywords}}" wx:for-item="keyword" wx:key="*this">
            <view class="keyword-tag">{{keyword}}</view>
          </block>
        </view>

        <view class="advice-note">
          <text class="advice-label">💡 建议：</text>
          <text class="advice-text">{{item.advice}}</text>
        </view>
      </view>
    </block>

    <view class="coverage-info">
      <view class="info-title">维度说明</view>
      <view class="info-item">
        <text class="info-label">作息规律</text>
        <text class="info-value">上床/起床时间规律性</text>
      </view>
      <view class="info-item">
        <text class="info-label">睡眠质量</text>
        <text class="info-value">入睡难度、夜间醒来次数</text>
      </view>
      <view class="info-item">
        <text class="info-label">饮食习惯</text>
        <text class="info-value">早餐规律、饮食均衡</text>
      </view>
      <view class="info-item">
        <text class="info-label">运动习惯</text>
        <text class="info-value">运动频率、持续时间</text>
      </view>
      <view class="info-item">
        <text class="info-label">电子产品使用</text>
        <text class="info-value">睡前使用手机、电脑</text>
      </view>
      <view class="info-item">
        <text class="info-label">压力管理</text>
        <text class="info-value">白天压力对睡眠影响</text>
      </view>
      <view class="info-item highlight">
        <text class="info-label">😴 提示：</text>
        <text class="info-value">良好的睡眠和生活习惯有助于身心健康</text>
      </view>
    </view>
  </view>
</view>
